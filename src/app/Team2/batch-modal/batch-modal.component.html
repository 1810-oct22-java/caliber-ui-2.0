<!--********************************************* Create Batch Modal ************************************-->

<div class="modal fade" id="createBatchModal" [hidden]="hide" tabindex="-1" role="dialog" aria-labelledby="batchModalLabel">
  <div class="modal-dialog" role="document">
    <form id="formId" ngNativeValidate (submit)="checkDates('createBatchModal')" data-toggle="modal" data-target="#dateError" >
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
          <h4 *ngIf="createOrUpdate === null" class="modal-title" id="batchModalLabel">Create New Batch</h4>
          <h4 *ngIf="createOrUpdate != null" class="modal-title" id="batchModalLabel">Update Batch</h4>
        </div>
        <!-- Add Batch Info -->
        <div class="modal-body">
          <div class="row">
            <div class="form-group col-md-6 col-sm-6">
              <label for="trainingName">Training Name:</label>
              <input [(ngModel)]="trainingName" required [ngModelOptions]="{standalone: true}" type="text" class="form-control"
                id="trainingName" placeholder="1611 Jul11 Java" name="trainingName">
              <div *ngIf="submitted && !trainingName" class="invalid-feedback">Training name is required</div>
            </div>
            <div class="form-group col-md-6 col-sm-6">
              <label for="trainingType">Training Type:</label>
              <select #t (change)="setTrainingType(t.value)" class="form-control" id="trainingType" required name="trainingType">
                <option *ngIf="createOrUpdate === null" selected="selected" id="defaultTrainingType" value="" disabled>Select
                  Training Type</option>
                <option *ngIf="createOrUpdate != null" selected="selected" value="createOrUpdate.trainingType" disabled>{{createOrUpdate.trainingType}}</option>
                <option *ngFor="let option of trainingTypes" [ngValue]="option">{{option}}</option>
              </select>
              <div *ngIf="submitted && !trainingType" class="invalid-feedback">Training type is required</div>
            </div>
          </div>
          <div class="row">
            <div class="form-group col-md-6 col-sm-6">
              <label for="skillType">Skill Type:</label>
              <select #skillType (change)="setSkillType(skillType.value)" name="skillType" class="form-control" id="skillType"
                required>
                <option *ngIf="createOrUpdate === null" selected="selected" value="" disabled>Select Skill Type</option>
                <option *ngIf="createOrUpdate != null" selected="selected" value="createOrUpdate.skillType" disabled>{{createOrUpdate.skillType}}</option>
                <option *ngFor="let option of skillTypes" [ngValue]="option">{{option}}</option>
              </select>
              <div *ngIf="submitted && !skillType" class="invalid-feedback">Skill type is required</div>
            </div>
            <!-- Dropdown for location -->
            <div class="form-group col-md-6 col-sm-6">
              <label for="commonLocations">Location :</label>
              <!-- Leave the comment below -->
              <!-- ng-options is used ass opposed to ng-repeat because an entire object needs to be passed -->

              <!-- TO DO: implement filter group by option.state for option in (location.options | orderBy:['state','company']  | filter : {active:true})  track by option.addressId" -->
              <select #location (change)="setLocation(location.value)" id="location" required class="form-control"
                required name="location">
                <option *ngIf="createOrUpdate === null" value="" selected="selected" disabled>Select Location</option>
                <option *ngIf="createOrUpdate != null" value="createOrUpdate.location" disabled>{{createOrUpdate.location}}</option>
                <option *ngFor="let option of locationOptions" [ngValue]="option">{{ option }}</option>
              </select>
              <div *ngIf="submitted && !location" class="invalid-feedback">Location is required</div>
            </div>
            <!-- Dropdown ends -->

          </div>
          <div class="row">
            <div class="form-group col-md-6 col-sm-6">
              <label for="trainer">Trainer:</label>
              <select #trainer (change)="setTrainer(trainer.value)" class="form-control" id="trainer" required name="trainer">
                <option *ngIf="createOrUpdate === null" value="" selected="selected" disabled>Select Trainer</option>
                <option *ngIf="createOrUpdate != null" value="createOrUpdate.trainer" selected="selected" disabled>{{createOrUpdate.trainer}}</option>
                <option *ngFor="let option of trainers" [ngValue]="option">{{option}}</option>
              </select>
              <div *ngIf="submitted && !trainer" class="invalid-feedback">Trainer is required</div>
            </div>
            <div class="form-group col-md-6 col-sm-6">
              <label for="co-trainer">Co-Trainer:</label>
              <select [(ngModel)]="coTrainer" [ngModelOptions]="{standalone: true}" class="form-control" id="co-trainer"
                name="coTrainer">
                <option [ngValue]="null" disabled>Select Co-Trainer</option>
                <option [ngValue]="none">None</option>
                <option *ngFor="let option of trainers" [ngValue]="option">{{option}}</option>
              </select>
            </div>
          </div>
          <div class="row">
            <div class="form-group col-md-6 col-sm-6" format="YYYY-MM-DD">
              <label for="start-date">Start Date:</label>
              <div class="input-group" id="start-date" data-datepicker="true">
                <input type="date" id="startDate" class="date-input form-control date-selector" name="s" min="0"
                  placeholder="Start Date" [(ngModel)]="startDate" [ngModelOptions]="{standalone: true}" required><span
                  class="input-group-addon glyphicon glyphicon-calendar"></span>
              </div>
            </div>
            <div class="form-group col-md-6 col-sm-6" format="YYYY-MM-DD">
              <label for="end_date">End Date:</label>
              <div class="input-group" id="end-date" data-datepicker="true">
                <input type="date" class="date-input form-control date-selector" name="date" placeholder="End Date"
                  [(ngModel)]="endDate" [ngModelOptions]="{standalone: true}" required>
                <span class="input-group-addon glyphicon glyphicon-calendar">
                </span>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="form-group col-md-6 col-sm-6">
              <label for="goodGrade">Good Grade: <span title="The minimum acceptable grade." alt="The minimum acceptable grade."
                  class="glyphicon glyphicon-question-sign"></span></label>
              <input [(ngModel)]="goodGradeThreshold" [ngModelOptions]="{standalone: true}" (input)="setMinGrade()"
                type="number" min="0" step="1" class="form-control" name="goodGradeThreshold" id="goodGrade"
                placeholder="80" required>
              <div *ngIf="submitted && !goodGradeThreshold" class="invalid-feedback">Good grade is required</div>
            </div>
            <div class="form-group col-md-6 col-sm-6">
              <label for="borderlineGrade">Passing Grade: <span title="The minimum grade required to pass. Falling below this grade will likely result in disciplinary action."
                  alt="The minimum grade required to pass. Falling below this grade will likely result in disciplinary action."
                  class="glyphicon glyphicon-question-sign"></span></label>
              <input [(ngModel)]="borderlineGradeThreshold" [ngModelOptions]="{standalone: true}" (change)="lowerMinGrade()"
                (input)="lowerMinGrade" type="number" min="0" step="1" class="form-control" id="borderlineGrade"
                placeholder="50" required name="passingGrade" max="goodGradeThreshold">
              <div *ngIf="submitted && !borderlineGradeThreshold" class="invalid-feedback">Passing grade is required</div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <input *ngIf= "createOrUpdate === null" value="Save"  type="submit" class="btn btn-primary"/>
          <input *ngIf= "createOrUpdate != null" value="Update"  type="submit" class="btn btn-primary"/>
          <button type="button" id="closeBtn" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
    </form>
  </div>
</div>

<!------------------------------------------------- Error Modal for Date -------------------------------------->
<div #dateError class="modal fade" id="checkBatchModalDate" tabindex="-1" role="dialog" aria-labelledby="batchModalLabel">
    <div id="overlay" class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title" id="batchModalLabel">
            Invalid Batch Info&nbsp;<i class="fa fa-frown-o fa-2x pick " style="font-weight:100" aria-hidden="true" ></i>
          </h4>
          <button type="button" class="close" data-dismiss="modal" (click)="closeModal()" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>

        </div>
        <div class="modal-body">

          <p *ngIf="dateIsError">
            The Start Date should be before the End Date.
          </p>
          <p *ngIf="trainerIsError">
            Trainer and Co-trainer cannot be the same.
          </p>

        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal" (click)="closeModal()">Ok</button>
        </div>
      </div>
    </div>
  </div>